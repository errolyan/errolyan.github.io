# 第182期 Claude Skills：深入探究Anthropic的智能体框架



## 一、引言
Claude Skills是Anthropic推出的一项强大功能，它能让Claude通过连接外部工具与服务来执行特定任务。这一能力极大地拓展了Claude核心语言模型之外的功能，使其能够与外部世界交互、获取实时信息，并代表用户执行操作。

本技术博客将探讨Claude Skills的架构、工作流程及集成可能性，尤其聚焦于它与A2A、MCP服务器等其他智能体框架的关联。


## 二、什么是Claude Skills？
Skill（技能）为大型模型赋予特定能力，这与Anthropic同样提出的MCP（模型上下文协议）概念类似。

例如，若你想查询明天的天气，模型本身无法直接完成这一操作，它需要连接互联网搜索天气预报。过去，这一需求可通过MCP实现；如今，使用Skill也能达成同样目的——比如，一个“天气”Skill可能是一段Python方法，用于查询天气网站的数据。


## 三、Skill的结构
在Claude的设置中，存在一些内置Skill。一个Skill是存储在文件夹中的一组指令，包含以下内容：
- 一个名为SKILL.md的文件（采用Markdown格式，非JSON格式）
- 其他文件，如Python脚本

当AI智能体尝试解决特定问题时，会参考这些文件。

SKILL.md必须以YAML前置元数据开头，且至少包含两个字段：
- name：技能的名称
- description：技能的功能

智能体启动时，会将这些元数据预加载到系统提示中，以便Claude了解每个已安装Skill的作用。




## 四、核心能力
Claude Skills是一种特定能力，它通过以下方式拓展Claude的功能：
- 连接外部API与服务
- 获取训练数据之外的实时信息
- 代表用户在数字世界中执行操作
- 处理并分析来自多种来源的数据
- 与现有工具和工作流程集成
- 借助明确的工具使用指令定义可重复的工作流程

Skills将Claude从对话式AI转变为功能更全面的智能体，使其在与外部系统交互的同时，仍能保持理解、推理和沟通方面的核心优势。


## 五、Claude Skills的架构
Claude Skills的架构设计遵循模块化、安全性和可扩展性原则。根据最新信息，其结构可准确描述如下：


![](https://fastly.jsdelivr.net/gh/bucketio/img18@main/2025/11/05/1762308740890-b88efaee-c456-4b5e-b1a3-8d3ce00320f6.png)


### （一）关键组件
- **技能路由器（Skills Router）**：核心组件，负责根据用户请求判断何时调用技能以及调用哪个技能
- **技能注册表（Skill Registry）**：包含可用技能的元数据、能力和需求的目录
- **执行引擎（Execution Engine）**：管理技能的执行生命周期，处理API调用、数据转换和错误管理
- **安全管理器（Security Manager）**：执行技能使用的身份验证和授权策略
- **结果处理器（Result Processor）**：对技能返回的结果进行转换和格式化，以便集成到Claude的响应中。


## 六、Claude Skills的工作流程
基于实际使用模式，Claude Skills的工作流程已得到优化：


![](https://fastly.jsdelivr.net/gh/bucketio/img13@main/2025/11/05/1762308757058-4804af72-b54c-4a4d-806b-628a19eb680e.png)


### （一）工作流程步骤
1. **意图分析（Intent Analysis）**：Claude分析用户请求，确定潜在意图和需求
2. **技能确定（Skill Determination）**：技能路由器判断是否需要调用技能，以及哪种特定技能最适合满足请求
3. **上下文验证（Context Validation）**：系统验证技能在当前上下文下是否可执行，并确认是否具备相应权限
4. **技能调用（Skill Invocation）**：使用从用户请求中提取的必要参数调用所选技能
5. **外部交互（External Interaction）**：技能与外部服务或API交互以满足请求
6. **结果处理（Result Processing）**：技能处理并验证从外部服务接收的数据
7. **响应集成（Response Integration）**：Claude将技能输出整合为连贯的响应
8. **交付（Delivery）**：以自然、对话式的方式向用户呈现最终响应。


## 七、创建自定义Skill
创建自定义Claude Skill需遵循以下关键步骤：
1. **定义技能用途（Define the Skill’s Purpose）**：明确技能将执行的任务
2. **设计API接口（Design the API Interface）**：指定端点、参数和身份验证方法
3. **实现技能逻辑（Implement the Skill Logic）**：开发技能被调用时将执行的代码
4. **测试技能（Test the Skill）**：确保技能在各种场景下都能正常运行
5. **部署技能（Deploy the Skill）**：使技能可被Claude使用
6. **配置权限（Configure Permissions）**：设置适当的技能访问控制。


## 八、Skill定义结构
**重要提示**：Skills采用Markdown格式定义，而非JSON格式。每个技能必须包含一个带有YAML前置元数据的SKILL.md文件。

### （一）SKILL.md示例结构
```markdown
---
name: example-skill
description: 执行特定任务的技能
version: 1.0.0
---

# 示例技能
本技能展示如何创建自定义Claude Skill。

## 用途
描述本技能的功能及适用场景。

## 工具
本技能可使用以下工具：
- 工具1：描述
- 工具2：描述

## 工作流程
1. 步骤1：技能首先执行的操作
2. 步骤2：技能处理信息的方式
3. 步骤3：技能返回结果的方式

## 使用示例
提供本技能的使用示例。

## 其他文件
可在此文件夹中引用其他Markdown文件或Python脚本
```

**注意**：SKILL.md可引用其他Markdown文件，这使其具备高度灵活性和可组合性。


## 九、Skills、MCP与A2A的对比：理解AI智能体生态
你可能会问：既然我们已能通过子智能体或MCP实现这些功能，为何还要提出Skills的概念？

### （一）上下文窗口管理：关键差异
核心差异在于上下文窗口的管理方式。

1. **MCP的上下文挑战**：若打开一个Claude实例并连接三个MCP服务器，这些服务器本身就会占用大量上下文窗口——因为每个连接都会加载所有可用工具，AI智能体还需判断在哪个步骤使用哪个工具。
2. **子智能体的局限性**：子智能体的专业性更强，但其上下文与主智能体相互独立。子智能体运行时，会执行步骤并返回结果，却不会将中间推理过程传递给主智能体。
3. **Skills的优势**：Claude的Skills工作方式不同，核心在于SKILL.md文件。该文件本质上包含该Skill的系统提示，定义了技能的功能，并列出了其可使用的所有工具。

### （二）Skills与MCP的两大关键区别
从功能上看，Skills与MCP看似相似（尤其是脚本作为工具使用时），但二者存在两大关键区别：
1. **专业性与工作流程定义**：每个Skill都为可重复工作流程设计，你需明确告知AI如何使用工具以及使用顺序。这使得Skills在执行特定任务时更具确定性和可靠性。
2. **高效的上下文管理（渐进式披露）**：当存在多个Skills时，Claude仅加载每个Skill的元数据（约100-150个token），而非完整的工具描述。

#### 1. 渐进式披露流程
- 当收到用户请求时，Claude会将其与Skill描述进行语义对比
- Claude筛选出最相关的Skills
- 仅在筛选完成后，才加载这些Skills的完整内容

Anthropic将这种设计称为“渐进式披露（Progressive Disclosure）”，这一原则使Skills具备轻量化、灵活性和可扩展性。

可将其比作一本结构清晰的手册：
- 先查看目录
- 仅打开相关章节
- 必要时查阅附录

Skills让Claude能够“按需加载”所需内容。

### （三）与MCP（模型上下文协议）的关系
1. **标准化与实现**：
   - MCP提供跨不同大型语言模型（LLM）的工具使用协议和框架
   - Claude Skills是针对Claude工具使用能力的特定实现。
2. **互操作性潜力**：
   - Claude Skills有望采用MCP标准，以实现更好的互操作性
   - MCP服务器可包含Claude Skills的适配器，使其能被其他LLM使用。
3. **MCP服务器卡片：一种替代方案**：
   - MCP服务器卡片提供与Claude Skills非常相似的功能，但具有模型无关性
   - 卡片通过结构化格式封装复杂信息，可显著减少token消耗
   - 它们支持在不同LLM（而非仅Claude）中实现一致的工具使用模式
   - 企业可采用单一工具集成策略，适配多个AI模型。
4. **互补性方法**：
   这些技术并非竞争对手，而是解决同一挑战不同方面的互补方法。企业可同时使用二者：MCP用于跨模型标准化，Claude Skills用于Claude专属功能。

### （四）与A2A（自适应AI智能体）的关系
Claude Skills与A2A代表了拓展AI能力的不同方法：
1. **架构差异**：
   - Claude Skills与Claude核心系统深度集成，能提供流畅的用户体验
   - A2A设计为更独立的框架，可与多种LLM配合使用，而非仅支持Claude。
2. **集成方式**：
   - Claude Skills遵循由Anthropic管理的、更可控的平台专属方法
   - A2A采用更灵活的开放式架构，可更自由地定制和拓展。
3. **互补优势**：
   - Claude Skills擅长在Claude生态系统内提供特定、明确的功能
   - A2A在需要复杂智能体行为、多智能体协作和可定制工作流程的场景中表现突出。
4. **协作潜力**：
   - A2A有望在其更广泛的智能体框架中利用Claude Skills作为特定能力
   - Claude可采用A2A模式执行更复杂的多步骤推理过程。


## 十、Claude Skills开发的最佳实践
1. **聚焦用户价值**：设计能解决用户实际问题的技能，而非单纯展示技术能力
2. **保持上下文感知**：确保技能理解并保留对话上下文
3. **优雅处理错误**：实现稳健的错误处理机制，并在出现问题时提供有用反馈
4. **重视隐私与安全**：关注数据处理实践，实施适当的安全措施
5. **注重可发现性**：让用户易于发现和理解技能
6. **全面测试**：在多种输入和场景下验证技能
7. **清晰文档**：为开发者和用户提供全面的文档说明。


## 十一、Skills的潜力
目前判断这一模型是否会成为行业标准尚为时过早，但其潜力巨大。

### （一）行业领导力
MCP同样由Anthropic提出，随后被众多主流模型提供商采用。具备定义此类标准的能力，是真正行业领导者的标志。Skills能否遵循同样的发展路径，取决于生态系统对其的接受程度。

### （二）以Markdown为基础
值得一提的是，SKILL.md甚至可引用其他Markdown文件。Markdown再次发挥了重要作用！

这一设计选择使Skills具备以下特点：
- 易于读写
- 支持版本控制
- 可组合且模块化
- 人机双读友好。


## 十二、未来发展方向
Claude Skills生态系统可能朝着以下几个方向发展：
1. **更高自主性**：Skills可能获得更强的自主能力，在更少用户指导的情况下执行复杂任务
2. **多技能协同**：具备组合多个技能解决复杂问题的能力
3. **个性化**：开发能适配用户个人偏好和需求的Skills
4. **协作式技能**：打造促进用户与AI协作的能力
5. **标准化**：有望采用跨平台标准（如MCP提出的标准）
6. **生态拓展**：随着更多开发者创建Skills，可能会出现针对Claude Skills的“应用商店”模式。


## 十三、结论
Claude Skills是AI系统在提升实用性和解决实际问题能力方面的重要突破。通过借助特定工具和外部集成拓展Claude的核心能力，Skills将Claude从对话式AI转变为更全面的助手，使其能够执行操作并获取训练数据之外的信息。

尽管Claude Skills、A2A智能体和MCP服务器在某些领域看似存在重叠，但它们实则是解决同一挑战（提升AI系统能力、灵活性和实用性）不同方面的互补技术。希望充分发挥这些技术价值的企业，应思考如何让它们协同工作，而非将其视为竞争替代品。

随着该领域的不断发展，这些系统之间的互操作性有望进一步提升，而MCP等标准可能为Claude Skills、A2A智能体等各类实现提供通用基础。